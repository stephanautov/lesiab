(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{4908:(e,s,a)=>{"use strict";a.d(s,{F:()=>d,x:()=>c});var n=a(9835),l=a(5931),t=a(9668),r=a(1129),i=a(6262);a(9088);let d=(0,t.pY)();function c(e){let{children:s}=e,a=(0,i.jE)(),[c]=l.useState(()=>d.createClient({links:[(0,t.fu)({url:"".concat("","/api/trpc"),transformer:r.Ay})]}));return(0,n.jsx)(d.Provider,{client:c,queryClient:a,children:s})}},5839:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var n=a(9835);a(5931);var l=a(7763),t=a(4908);let r=["audio","code","image","text","pdf","video"],i={targets:"both",uploads:{enabled:!1,types:[]},downloads:{enabled:!1,types:[]},business:{isBusiness:!1},audience:""};function d(e){let{title:s,children:a}=e;return(0,n.jsxs)("section",{className:"rounded border p-4",children:[(0,n.jsx)("h2",{className:"mb-2 font-medium",children:s}),(0,n.jsx)("div",{className:"space-y-3",children:a})]})}function c(e){let{id:s,label:a,checked:l,onChange:t}=e;return(0,n.jsxs)("label",{htmlFor:s,className:"flex items-center gap-2",children:[(0,n.jsx)("input",{id:s,type:"checkbox",className:"h-4 w-4",checked:l,onChange:e=>t(e.target.checked)}),(0,n.jsx)("span",{className:"text-sm",children:a})]})}function o(e){let{name:s,value:a,checked:l,onChange:t,label:r}=e,i="".concat(s,"-").concat(a);return(0,n.jsxs)("label",{htmlFor:i,className:"flex items-center gap-2",children:[(0,n.jsx)("input",{id:i,type:"radio",name:s,className:"h-4 w-4",value:a,checked:l,onChange:e=>t(e.target.value)}),(0,n.jsx)("span",{className:"text-sm",children:r})]})}function u(){var e,s,a,u;let{register:x,handleSubmit:m,control:p,watch:h,reset:b,formState:{errors:j}}=(0,l.mN)({defaultValues:{description:"",answers:i}}),g=t.F.orchestration.preview.useMutation(),f=t.F.orchestration.start.useMutation(),v=h("answers");return(0,n.jsxs)("main",{className:"mx-auto max-w-5xl px-4 py-8 space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Describe your application"}),(0,n.jsx)("p",{className:"text-sm text-neutral-600",children:"Tell LESiAB what you want to build. We’ll normalize your description into a canonical spec and generate deterministic artifacts."}),(0,n.jsxs)("form",{onSubmit:m(e=>f.mutate({description:e.description,answers:e.answers})),className:"grid gap-6 md:grid-cols-[1fr,380px]",children:[(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(d,{title:"1) Project description",children:[(0,n.jsx)("textarea",{...x("description",{required:!0,minLength:5}),className:"w-full min-h-[200px] rounded border px-3 py-2 text-sm",placeholder:"Example: A blog with posts and comments. Users can sign in, create posts, comment, and upload images."}),j.description?(0,n.jsx)("p",{className:"text-xs text-red-600",children:"Please write at least a short sentence."}):null,(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{type:"button",onClick:m(e=>g.mutate({description:e.description,answers:e.answers})),disabled:g.isPending||f.isPending,className:"rounded border px-4 py-2 text-sm",children:g.isPending?"Previewing…":"Preview spec"}),(0,n.jsx)("button",{type:"submit",disabled:f.isPending,className:"rounded bg-black px-4 py-2 text-sm font-medium text-white disabled:opacity-50",children:f.isPending?"Generating…":"Generate"}),(0,n.jsx)("button",{type:"button",onClick:()=>b({description:"",answers:i}),className:"rounded border px-4 py-2 text-sm",disabled:f.isPending||g.isPending,children:"Clear"})]})]}),g.isSuccess?(0,n.jsxs)(d,{title:"Proposed profile.json (preview)",children:[(0,n.jsx)("pre",{className:"max-h-96 overflow-auto rounded bg-neutral-50 p-3 text-xs",children:JSON.stringify(g.data.profile,null,2)}),(0,n.jsxs)("p",{className:"text-xs text-neutral-600",children:["Looks good? Click ",(0,n.jsx)("b",{children:"Generate"})," to run the full pipeline (artifacts will be persisted)."]})]}):null,f.isSuccess?(0,n.jsxs)(d,{title:"Orchestration complete",children:[(0,n.jsxs)("div",{className:"space-y-1 text-sm text-neutral-700",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-mono",children:"orc:"})," ",f.data.orchestrationId]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-mono",children:"files:"})," ",f.data.files.length]})]}),(0,n.jsxs)("details",{className:"mt-2",children:[(0,n.jsx)("summary",{className:"cursor-pointer text-sm underline",children:"Show artifact paths"}),(0,n.jsx)("ul",{className:"mt-2 max-h-60 overflow-auto text-xs",children:f.data.files.map(e=>(0,n.jsx)("li",{className:"font-mono",children:e},e))})]}),(0,n.jsxs)("p",{className:"mt-3 text-xs text-neutral-500",children:["Artifacts are saved to Supabase Storage bucket"," ",(0,n.jsx)("code",{children:"artifacts"}),"."]}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)("a",{href:"/posts",className:"text-sm underline underline-offset-2",children:"Go to Posts →"})})]}):null,g.isError?(0,n.jsx)("p",{className:"rounded border border-red-300 bg-red-50 p-3 text-sm text-red-700",children:String(null!=(a=null==(e=g.error)?void 0:e.message)?a:"Preview failed")}):null,f.isError?(0,n.jsx)("p",{className:"rounded border border-red-300 bg-red-50 p-3 text-sm text-red-700",children:String(null!=(u=null==(s=f.error)?void 0:s.message)?u:"Generation failed")}):null]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(d,{title:"2) Targets",children:(0,n.jsx)(l.xI,{control:p,name:"answers.targets",render:e=>{let{field:s}=e;return(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(o,{name:"targets",value:"mobile",checked:"mobile"===s.value,onChange:s.onChange,label:"Mobile"}),(0,n.jsx)(o,{name:"targets",value:"desktop",checked:"desktop"===s.value,onChange:s.onChange,label:"Desktop"}),(0,n.jsx)(o,{name:"targets",value:"both",checked:"both"===s.value,onChange:s.onChange,label:"Both"})]})}})}),(0,n.jsxs)(d,{title:"3) Uploads",children:[(0,n.jsx)(l.xI,{control:p,name:"answers.uploads.enabled",render:e=>{let{field:s}=e;return(0,n.jsx)(c,{id:"uploads-enabled",label:"Enable uploads",checked:!!s.value,onChange:s.onChange})}}),v.uploads.enabled?(0,n.jsx)(l.xI,{control:p,name:"answers.uploads.types",render:e=>{var s;let{field:a}=e,l=new Set(null!=(s=a.value)?s:[]);return(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:r.map(e=>(0,n.jsx)(c,{id:"up-".concat(e),label:e,checked:l.has(e),onChange:s=>{var n;let l=new Set(null!=(n=a.value)?n:[]);s?l.add(e):l.delete(e),a.onChange(Array.from(l))}},"up-".concat(e)))})}}):null]}),(0,n.jsxs)(d,{title:"4) Downloads",children:[(0,n.jsx)(l.xI,{control:p,name:"answers.downloads.enabled",render:e=>{let{field:s}=e;return(0,n.jsx)(c,{id:"downloads-enabled",label:"Enable downloads",checked:!!s.value,onChange:s.onChange})}}),v.downloads.enabled?(0,n.jsx)(l.xI,{control:p,name:"answers.downloads.types",render:e=>{var s;let{field:a}=e,l=new Set(null!=(s=a.value)?s:[]);return(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:r.map(e=>(0,n.jsx)(c,{id:"dl-".concat(e),label:e,checked:l.has(e),onChange:s=>{var n;let l=new Set(null!=(n=a.value)?n:[]);s?l.add(e):l.delete(e),a.onChange(Array.from(l))}},"dl-".concat(e)))})}}):null]}),(0,n.jsxs)(d,{title:"5) Business & Audience",children:[(0,n.jsx)(l.xI,{control:p,name:"answers.business.isBusiness",render:e=>{let{field:s}=e;return(0,n.jsx)(c,{id:"is-business",label:"This is a business app",checked:!!s.value,onChange:s.onChange})}}),v.business.isBusiness?(0,n.jsxs)("label",{className:"block text-sm",children:["Business model",(0,n.jsxs)("select",{...x("answers.business.model"),className:"mt-1 w-full rounded border px-3 py-2 text-sm",defaultValue:"subscription",children:[(0,n.jsx)("option",{value:"subscription",children:"Subscription"}),(0,n.jsx)("option",{value:"services",children:"Services"}),(0,n.jsx)("option",{value:"products",children:"Products"})]})]}):null,(0,n.jsxs)("label",{className:"block text-sm",children:["Who will use your app?",(0,n.jsx)("textarea",{...x("answers.audience"),className:"mt-1 w-full min-h-[80px] rounded border px-3 py-2 text-sm",placeholder:"e.g. public visitors, internal staff, paying customers"})]})]})]})]})]})}},7461:(e,s,a)=>{Promise.resolve().then(a.bind(a,5839))}},e=>{e.O(0,[789,763,900,341,358],()=>e(e.s=7461)),_N_E=e.O()}]);