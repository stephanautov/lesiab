(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{3488:(e,t,s)=>{Promise.resolve().then(s.bind(s,4635))},4635:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var l=s(9835),a=s(5931),r=s(7763),n=s(4908),d=s(2921),i=s(9455);function c(e){let{data:t}=e,s=(0,a.useMemo)(()=>Object.keys((null==t?void 0:t[0])||{}).map(e=>({accessorKey:e,header:e,cell:e=>{var t;return String(null!=(t=e.getValue())?t:"")}})),[t]),r=(0,d.N4)({data:null!=t?t:[],columns:s,getCoreRowModel:(0,i.HT)()});return t&&0!==t.length?(0,l.jsx)("div",{className:"overflow-auto rounded-md border",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:r.getHeaderGroups().map(e=>(0,l.jsx)("tr",{className:"border-b bg-neutral-50",children:e.headers.map(e=>(0,l.jsx)("th",{className:"px-3 py-2 text-left font-medium",children:e.isPlaceholder?null:(0,d.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,l.jsx)("tbody",{children:r.getRowModel().rows.map(e=>(0,l.jsx)("tr",{className:"border-b hover:bg-neutral-50",children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{className:"px-3 py-2",children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,l.jsx)("div",{className:"text-sm text-neutral-500",children:"No data"})}function o(){var e,t,s,a,d;let i=n.F.useUtils(),o=n.F.posts.list.useQuery(),m=n.F.posts.create.useMutation({onSuccess:async()=>{await i.posts.list.invalidate(),p({title:"",content:""})}}),{register:u,handleSubmit:x,reset:p,formState:{errors:h}}=(0,r.mN)({defaultValues:{title:"",content:""}});return o.isLoading?(0,l.jsx)("div",{className:"p-6 text-sm text-neutral-600",children:"Loading posts…"}):o.isError?(0,l.jsxs)("div",{className:"p-6 rounded border border-red-300 bg-red-50 text-sm text-red-700",children:["Failed to load posts: ",String(null!=(s=null==(t=o.error)?void 0:t.message)?s:"Unknown error")]}):(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("header",{className:"space-y-1",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Posts"}),(0,l.jsx)("p",{className:"text-sm text-neutral-600",children:"Create a post, then see it appear in the table below."})]}),(0,l.jsxs)("form",{onSubmit:x(e=>m.mutate(e)),className:"rounded border p-4 space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium",children:"Title"}),(0,l.jsx)("input",{...u("title",{required:!0,minLength:2}),className:"mt-1 w-full rounded border px-3 py-2 text-sm",placeholder:"My first post"}),h.title?(0,l.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a title."}):null]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium",children:"Content"}),(0,l.jsx)("textarea",{...u("content"),className:"mt-1 w-full min-h-[100px] rounded border px-3 py-2 text-sm",placeholder:"Optional content…"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{type:"submit",disabled:m.isPending,className:"rounded bg-black px-4 py-2 text-sm font-medium text-white disabled:opacity-50",children:m.isPending?"Saving…":"Create"}),m.isError?(0,l.jsx)("span",{className:"text-xs text-red-600",children:String(null!=(a=null==(e=m.error)?void 0:e.message)?a:"Create failed")}):null,m.isSuccess?(0,l.jsx)("span",{className:"text-xs text-green-700",children:"Saved."}):null]})]}),(0,l.jsx)(c,{data:null!=(d=o.data)?d:[]})]})}},4908:(e,t,s)=>{"use strict";s.d(t,{F:()=>i,x:()=>c});var l=s(9835),a=s(5931),r=s(9668),n=s(1129),d=s(6262);s(9088);let i=(0,r.pY)();function c(e){let{children:t}=e,s=(0,d.jE)(),[c]=a.useState(()=>i.createClient({links:[(0,r.fu)({url:"".concat("","/api/trpc"),transformer:n.Ay})]}));return(0,l.jsx)(i.Provider,{client:c,queryClient:s,children:t})}}},e=>{e.O(0,[789,763,921,900,341,358],()=>e(e.s=3488)),_N_E=e.O()}]);